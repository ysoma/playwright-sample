# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: 宿泊予約の一連フローが完了する
- Location: C:\Users\ysoma\github\playwright-sample\tests\reservation.spec.ts:25:5

# Error details

```
Error: locator.click: Test timeout of 30000ms exceeded.
Call log:
  - waiting for getByRole('button', { name: '閉じる' })

    at ReservePage.selectDate (C:\Users\ysoma\github\playwright-sample\pages\reservePage.ts:13:62)
    at ReservePage.fillReservationForm (C:\Users\ysoma\github\playwright-sample\pages\reservePage.ts:64:9)
    at C:\Users\ysoma\github\playwright-sample\tests\reservation.spec.ts:36:5
```

# Page snapshot

```yaml
- heading "Hotel Planisphere" [level=1]
- navigation:
  - list:
    - listitem:
      - link "ホーム"
    - listitem:
      - link "宿泊予約"
    - listitem:
      - link "会員登録"
    - listitem:
      - button "ログイン"
- heading "宿泊プラン一覧" [level=2]
- text: ⭐おすすめプラン⭐
- heading "お得な特典付きプラン" [level=5]
- list:
  - listitem: 大人1名7,000円
  - listitem: 1名様から
  - listitem: スタンダードツイン
- link "このプランで予約"
- text: 本日限り
- heading "素泊まり" [level=5]
- list:
  - listitem: 大人1名5,500円
  - listitem: 1名様から
  - listitem: シングル
- link "このプランで予約"
- heading "出張ビジネスプラン" [level=5]
- list:
  - listitem: 大人1名7,500円
  - listitem: 1名様から
  - listitem: シングル
- link "このプランで予約"
- heading "エステ・マッサージプラン" [level=5]
- list:
  - listitem: 大人1名9,000円
  - listitem: 1名様から
  - listitem: 部屋指定なし
- link "このプランで予約"
- heading "貸し切り露天風呂プラン" [level=5]
- list:
  - listitem: 大人1名9,000円
  - listitem: 1名様から
  - listitem: 部屋指定なし
- link "このプランで予約"
- heading "カップル限定プラン" [level=5]
- list:
  - listitem: 大人1名8,000円
  - listitem: 2名様から
  - listitem: プレミアムツイン
- link "このプランで予約"
- heading "テーマパーク優待プラン" [level=5]
- list:
  - listitem: 大人1名10,000円
  - listitem: 1名様から
  - listitem: 部屋指定なし
- link "このプランで予約"
- contentinfo:
  - list:
    - listitem:
      - link "GitHub"
  - paragraph: © 2020-2025 Takeshi Kishi
```

# Test source

```ts
   1 | /**
   2 |  * @name ReservePage
   3 |  * @description Reserve page object
   4 |  */
   5 |
   6 | import { BasePage } from './basePage';
   7 |
   8 | export class ReservePage extends BasePage {
   9 |     async selectDate(date: string) {
  10 |         const form = this.page.getByRole('textbox', { name: '宿泊日 必須' });
  11 |         await form.click();
  12 |         await form.fill(date);
> 13 |         await this.page.getByRole('button', { name: '閉じる' }).click();// 閉じる
     |                                                              ^ Error: locator.click: Test timeout of 30000ms exceeded.
  14 |     }
  15 |
  16 |     async selectStayDays(days: string) {
  17 |         await this.page.getByRole('spinbutton', { name: '宿泊数 必須' }).fill(days);
  18 |     }
  19 |
  20 |     async selectGuests(guests: string) {
  21 |         await this.page.getByRole('spinbutton', { name: '人数 必須' }).fill(guests);
  22 |     }
  23 |
  24 |     async chooseAdditionalPlans(plans: string[]) {
  25 |         for (const plan of plans) {
  26 |             await this.page.getByRole('checkbox', { name: plan }).check();
  27 |         }
  28 |     }
  29 |
  30 |     async fillName(name: string) {
  31 |         await this.page.getByRole('textbox', { name: '氏名 必須' }).fill(name);
  32 |     }
  33 |
  34 |     async selectContactMethod(method: 'no' | 'email' | 'tel') {
  35 |         await this.page.selectOption('select[name="contact"]', method);
  36 |     }
  37 |
  38 |
  39 |     async fillEmail(email: string) {
  40 |         await this.page.getByRole('textbox', { name: 'メールアドレス 必須' }).fill(email);
  41 |     }
  42 |
  43 |     async fillTel(tel: string) {
  44 |         await this.page.getByRole('textbox', { name: '電話番号 必須' }).fill(tel);
  45 |     }
  46 |
  47 |     async fillRemarks(remarks: string) {
  48 |         await this.page.fill('textarea[name="comment"]', remarks);
  49 |     }
  50 |
  51 |     async proceedToConfirm() {
  52 |         await this.page.locator('[data-test="submit-button"]').click();
  53 |     }
  54 |
  55 |     async fillReservationForm(data: {
  56 |         checkInDate: string;
  57 |         stayDays: string;
  58 |         guests: string;
  59 |         additionalPlans: string[];
  60 |         guestName: string;
  61 |         email: string;
  62 |         remarks: string;
  63 |     }) {
  64 |         await this.selectDate(data.checkInDate);
  65 |         await this.selectStayDays(data.stayDays);
  66 |         await this.selectGuests(data.guests);
  67 |         await this.chooseAdditionalPlans(data.additionalPlans);
  68 |         await this.fillName(data.guestName)
  69 |         await this.selectContactMethod(data.email ? 'email' : 'no');
  70 |         await this.fillEmail(data.email);
  71 |         await this.fillRemarks(data.remarks);
  72 |     }
  73 | }
  74 |
```