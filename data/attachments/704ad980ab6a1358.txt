# Instructions

- Following Playwright test failed.
- Explain why, be concise, respect Playwright best practices.
- Provide a snippet of code with the fix, if possible.

# Test info

- Name: 宿泊予約フローの各画面が視覚的に正しく表示される
- Location: /home/runner/work/playwright-sample/playwright-sample/tests/visual.spec.ts:41:5

# Error details

```
Error: expect(page).toHaveScreenshot(expected)

  Expected an image 1280px by 1310px, received 1280px by 1335px. 20389 pixels (ratio 0.02 of all image pixels) are different.

Expected: /home/runner/work/playwright-sample/playwright-sample/tests/visual.spec.ts-snapshots/reserve-firefox-linux.png
Received: /home/runner/work/playwright-sample/playwright-sample/test-results/visual-宿泊予約フローの各画面が視覚的に正しく表示される-firefox-retry1/reserve-actual.png
    Diff: /home/runner/work/playwright-sample/playwright-sample/test-results/visual-宿泊予約フローの各画面が視覚的に正しく表示される-firefox-retry1/reserve-diff.png

Call log:
  - expect.toHaveScreenshot(reserve.png) with timeout 10000ms
    - verifying given screenshot expectation
  - taking page screenshot
    - disabled all CSS animations
  - waiting for fonts to load...
  - fonts loaded
  - Expected an image 1280px by 1310px, received 1280px by 1335px. 20389 pixels (ratio 0.02 of all image pixels) are different.
  - waiting 100ms before taking screenshot
  - taking page screenshot
    - disabled all CSS animations
  - waiting for fonts to load...
  - fonts loaded
  - captured a stable screenshot
  - Expected an image 1280px by 1310px, received 1280px by 1335px. 20389 pixels (ratio 0.02 of all image pixels) are different.

    at captureSnapshot (/home/runner/work/playwright-sample/playwright-sample/helpers/visualHelpers.ts:12:24)
    at /home/runner/work/playwright-sample/playwright-sample/tests/visual.spec.ts:84:5
```

# Page snapshot

```yaml
- heading "Hotel Planisphere" [level=1]
- navigation:
  - list:
    - listitem:
      - link "ホーム"
    - listitem:
      - link "宿泊予約"
    - listitem:
      - link "会員登録"
    - listitem:
      - button "ログイン"
- heading "宿泊プラン一覧" [level=2]
- text: ⭐おすすめプラン⭐
- heading "お得な特典付きプラン" [level=5]
- list:
  - listitem: 大人1名7,000円
  - listitem: 1名様から
  - listitem: スタンダードツイン
- link "このプランで予約"
- text: 本日限り
- heading "素泊まり" [level=5]
- list:
  - listitem: 大人1名5,500円
  - listitem: 1名様から
  - listitem: シングル
- link "このプランで予約"
- heading "出張ビジネスプラン" [level=5]
- list:
  - listitem: 大人1名7,500円
  - listitem: 1名様から
  - listitem: シングル
- link "このプランで予約"
- heading "エステ・マッサージプラン" [level=5]
- list:
  - listitem: 大人1名9,000円
  - listitem: 1名様から
  - listitem: 部屋指定なし
- link "このプランで予約"
- heading "貸し切り露天風呂プラン" [level=5]
- list:
  - listitem: 大人1名9,000円
  - listitem: 1名様から
  - listitem: 部屋指定なし
- link "このプランで予約"
- heading "カップル限定プラン" [level=5]
- list:
  - listitem: 大人1名8,000円
  - listitem: 2名様から
  - listitem: プレミアムツイン
- link "このプランで予約"
- heading "テーマパーク優待プラン" [level=5]
- list:
  - listitem: 大人1名10,000円
  - listitem: 1名様から
  - listitem: 部屋指定なし
- link "このプランで予約"
- contentinfo:
  - list:
    - listitem:
      - link "GitHub"
  - paragraph: © 2020-2025 Takeshi Kishi
```

# Test source

```ts
   1 | /**
   2 |  * @name captureSnapshot
   3 |  * @description Captures a screenshot of the page and saves it with the given name.
   4 |  * @param {Page} page - The page to capture the screenshot from.
   5 |  * @param {string} name - The name of the screenshot.
   6 |  */
   7 |
   8 | import { Page, expect } from '@playwright/test';
   9 |
  10 | export async function captureSnapshot(page: Page, name: string) {
  11 |     await page.waitForLoadState('networkidle');
> 12 |     await expect(page).toHaveScreenshot(name, { fullPage: true });
     |                        ^ Error: expect(page).toHaveScreenshot(expected)
  13 | }
  14 |
```